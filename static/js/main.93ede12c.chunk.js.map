{"version":3,"sources":["1_ui_films/MainPage.module.css","1_ui_films/App.module.css","3_dal_films/api.ts","2_bll_films/filmsReducer.ts","2_bll_films/filmsSelector.ts","1_ui_films/Error.tsx","1_ui_films/MainPage.tsx","2_bll_films/redux.ts","1_ui_films/FilmsDetails.tsx","1_ui_films/App.tsx","index.tsx","1_ui_films/FilmsDetails.module.css"],"names":["module","exports","instanse","axios","create","baseURL","filmsApi","page","get","then","res","data","id","initialState","films","isLoading","filmDetails","currentPage","fetchingScroll","totalCount","error","actions","type","filmsReducer","state","action","filmsSelector","filmDetailsSelector","currentPageSelector","totalCountSelector","errorSelector","Error","useSelector","className","s","error_block","error_none","MainPage","dispatch","useDispatch","useState","fetching","setFetching","scrollHandler","e","target","documentElement","scrollHeight","scrollTop","window","innerHeight","length","useEffect","document","addEventListener","removeEventListener","handleClick","sessionStorage","setItem","pageYOffset","localStorage","JSON","stringify","a","results","total_results","scrollPosition","getItem","scrollTo","parseInt","removeItem","handleScrollPosition","card_movie_container","topbar_title","map","f","index","to","onClick","card_movie_body","card_movie_poster","src","poster_path","alt","title","card_movie_about","card_movie_title","card_movie_vote","card_movie_vote_star","vote_average","card_movie_overview","overview","rootReducer","combineReducers","store","createStore","applyMiddleware","thunkMiddleware","FilmsDetails","film","prevFilm","setPrevFilm","nextFilm","setNextFilm","adress","useLocation","pathname","Number","substring","parse","getFilmDetaisThunk","forEach","prev_button","details_poster","details_poster_prev","details_poster_next","details_title","details_common_info","release_date","details_common_info_dot","String","runtime","charAt","substr","details_common_info_star","details_common_info_votu","details_tagline","tagline","details_overview","AppC","withRouter","container","exact","path","render","footer","AppContainer","MainApp","basename","process","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.93ede12c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"card_movie_container\":\"MainPage_card_movie_container__2Eg7U\",\"topbar_title\":\"MainPage_topbar_title__RZgMJ\",\"card_movie_about\":\"MainPage_card_movie_about__NiIry\",\"card_movie_body\":\"MainPage_card_movie_body__3r6Mi\",\"card_movie_vote\":\"MainPage_card_movie_vote__1lq7k\",\"card_movie_poster\":\"MainPage_card_movie_poster__1aJNf\",\"card_movie_vote_star\":\"MainPage_card_movie_vote_star__cMyMU\",\"card_movie_overview\":\"MainPage_card_movie_overview__36Ovc\",\"card_movie_title\":\"MainPage_card_movie_title__1nlxC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__eys76\",\"footer\":\"App_footer__lRWTY\",\"error_none\":\"App_error_none__1nh_K\",\"error_block\":\"App_error_block__2sUbb\"};","import axios from 'axios';\r\n\r\nconst instanse = axios.create({\r\n    baseURL: `https://api.themoviedb.org/3/movie/`\r\n})\r\n\r\nexport const filmsApi = {\r\n    getFilms(page: number) {\r\n        return instanse.get(`https://api.themoviedb.org/3/movie/popular?api_key=a2df3d1a7611194432bbdf1fc80540f2&language=en-US&page=${page}`)\r\n        .then(res=>res.data)\r\n    },\r\n    getFilmDetails(id: number){\r\n        return instanse.get(`${id}?api_key=a2df3d1a7611194432bbdf1fc80540f2&language=en-US`)\r\n        .then(res=>res.data)\r\n    }\r\n}","import { CommonActionsTypes, CommonThunkType } from \"./redux\";\r\nimport { filmsApi } from './../3_dal_films/api';\r\n\r\n\r\nlet initialState = {\r\n    films: [] as Array<FimsType>,\r\n    isLoading: false,\r\n    filmDetails: null as null | FilmDetails,\r\n    currentPage: 1,\r\n    fetchingScroll: true,\r\n    totalCount: 0,\r\n    error: null as null|string\r\n}\r\n\r\ntype initialStateType = typeof initialState\r\n\r\nconst filmsReducer = (state: initialStateType = initialState, action: ActionsTypes): initialStateType => {\r\n    switch (action.type) {\r\n        case 'films/GET_ALL_FILMS':\r\n            return {\r\n                ...state,\r\n                films: [...state.films, ...action.films]\r\n            }\r\n        case 'films/TOOGLE_IS_LOADING':\r\n            return {\r\n                ...state,\r\n                isLoading: action.isLoading\r\n            }\r\n        case 'films/GET_FILM_DETAILS':\r\n            return {\r\n                ...state,\r\n                filmDetails: action.filmDetails\r\n            }\r\n        case 'films/SET_TOTAL_COUNT':\r\n            return {\r\n                ...state,\r\n                totalCount: action.totalCount\r\n            }\r\n\r\n        case 'films/SET_CURRENT_PAGE':\r\n            return {\r\n                ...state,\r\n                currentPage: state.currentPage + 1\r\n            }\r\n\r\n        case 'films/SET_ERROR':\r\n            return {\r\n                ...state,\r\n                error: action.error\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    getFilmsSuccess: (films: Array<FimsType>) => ({\r\n        type: 'films/GET_ALL_FILMS', films\r\n    } as const),\r\n    isLoadingChanged: (isLoading: boolean) => ({\r\n        type: 'films/TOOGLE_IS_LOADING', isLoading\r\n    } as const),\r\n    getFilmDetailsSuccess: (filmDetails: FilmDetails) => ({\r\n        type: 'films/GET_FILM_DETAILS', filmDetails\r\n\r\n    } as const),\r\n    totalPageChangedSuccess: (totalCount: number) => ({\r\n        type: 'films/SET_TOTAL_COUNT', totalCount\r\n    } as const),\r\n    currentPageChangedSuccess: (currentPage: number) => ({\r\n        type: 'films/SET_CURRENT_PAGE', currentPage\r\n    } as const),\r\n    errorRejected: (error:null|string) => ({\r\n        type: 'films/SET_ERROR', error\r\n    } as const),\r\n\r\n}\r\n\r\ntype ActionsTypes = CommonActionsTypes<typeof actions>\r\ntype ThunkType = CommonThunkType<ActionsTypes>\r\n\r\nexport const getFilmsThunk = (page: number): ThunkType => async (dispatch) => {\r\n    try {\r\n        let data = await filmsApi.getFilms(page)\r\n        dispatch(actions.getFilmsSuccess(data.results))\r\n\r\n        dispatch(actions.totalPageChangedSuccess(data.total_results))\r\n        dispatch(actions.currentPageChangedSuccess(page))\r\n\r\n    } catch (e) {\r\n        dispatch(actions.errorRejected('Error getting the list of movies! Please, try again.'))\r\n    }\r\n\r\n}\r\n\r\nexport const getFilmDetaisThunk = (id: number): ThunkType => async (dispatch) => {\r\n    try {\r\n        let data = await filmsApi.getFilmDetails(id)\r\n        dispatch(actions.getFilmDetailsSuccess(data))\r\n\r\n    } catch (e) {\r\n        dispatch(actions.errorRejected('Error getting the movie descriptions! Please, try again.'))\r\n    }\r\n}\r\n\r\n\r\nexport default filmsReducer;\r\n\r\n\r\n\r\ntype FimsType = {\r\n    poster_path: string | null\r\n    adult: boolean\r\n    overview: string\r\n    release_date: string\r\n    genre_ids: Array<number>\r\n    id: number\r\n    original_title: string\r\n    original_language: string\r\n    title: string\r\n    backdrop_path: string | null\r\n    popularity: number\r\n    vote_count: number\r\n    video: boolean\r\n    vote_average: number\r\n}\r\n\r\ntype FilmDetails = {\r\n    adult: boolean\r\n    backdrop_path: string | null\r\n    belongs_to_collection: null | {}\r\n    budget: number\r\n    genres: Array<{ id: number, name: String }>\r\n    homepage: string | null\r\n    id: number\r\n    imdb_id: string | null\r\n    original_language: string\r\n    original_title: string\r\n    overview: string | null\r\n    popularity: number\r\n    poster_path: string | null\r\n    production_companies: Array<{ name: string, id: number, logo_path: string | null, origin_country: string }>\r\n    production_countries: Array<{ iso_3166_1: string, name: string }>\r\n    release_date: string\r\n    revenue: number\r\n    runtime: number | null\r\n    spoken_languages: Array<{ iso_639_1: string, name: string }>\r\n    status: string\r\n    tagline: string | null\r\n    title: string\r\n    video: boolean\r\n    vote_average: number\r\n    vote_count: number\r\n}","import { AppStateType } from \"./redux\"\r\n\r\n  \r\nexport const filmsSelector=(state: AppStateType)=>{\r\n    return state.films.films\r\n}\r\n\r\nexport const isLoadingSelector=(state: AppStateType)=>{\r\n    return state.films.isLoading\r\n}\r\n\r\nexport const filmDetailsSelector=(state: AppStateType)=>{\r\n    return state.films.filmDetails\r\n}\r\n\r\nexport const currentPageSelector=(state: AppStateType)=>{\r\n    return state.films.currentPage\r\n}\r\n\r\n\r\nexport const totalCountSelector=(state: AppStateType)=>{\r\n    return state.films.totalCount\r\n}\r\n\r\nexport const errorSelector=(state: AppStateType)=>{\r\n    return state.films.error\r\n}","import s from './App.module.css'\r\nimport { useSelector } from 'react-redux';\r\nimport { errorSelector } from '../2_bll_films/filmsSelector';\r\n\r\n\r\nconst Error=()=>{\r\n\r\n    const error = useSelector(errorSelector)\r\n\r\n    return(\r\n        <div className={!error ? s.error_none: s.error_block}>\r\n            {error && error}\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default Error","import { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { getFilmsThunk } from \"../2_bll_films/filmsReducer\";\r\nimport { currentPageSelector, filmsSelector, totalCountSelector } from './../2_bll_films/filmsSelector';\r\nimport s from './MainPage.module.css'\r\nimport Error from './Error';\r\n\r\n\r\nconst MainPage = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const currentPage = useSelector(currentPageSelector)\r\n    const films = useSelector(filmsSelector)\r\n    const totalCount = useSelector(totalCountSelector)\r\n\r\n    const [fetching, setFetching] = useState(true)\r\n\r\n    const scrollHandler = (e: any) => {\r\n        if (e.target.documentElement.scrollHeight -\r\n            (e.target.documentElement.scrollTop + window.innerHeight) < 100 && films.length < totalCount) {\r\n            setFetching(true)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('scroll', scrollHandler)\r\n        return function () {\r\n            document.removeEventListener('scroll', scrollHandler)\r\n        }\r\n    }, [scrollHandler])\r\n\r\n    \r\n    const handleClick = (e: any) => {\r\n        sessionStorage.setItem(\"scrollPosition\", window.pageYOffset as any);\r\n    };\r\n\r\n    const handleScrollPosition = () => {\r\n        const scrollPosition = sessionStorage.getItem(\"scrollPosition\");\r\n        if (scrollPosition) {\r\n            window.scrollTo(0, parseInt(scrollPosition));\r\n            sessionStorage.removeItem(\"scrollPosition\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('films', JSON.stringify(films));\r\n\r\n        if (fetching) {\r\n            dispatch(getFilmsThunk(currentPage))\r\n            handleScrollPosition()\r\n            setFetching(false)\r\n        }\r\n    }, [films, fetching])\r\n\r\n    \r\n    return (\r\n        <div className={s.card_movie_container}>\r\n            <div className={s.topbar_title}>Movie</div>\r\n\r\n            <Error/>\r\n\r\n            {films ? films.map((f, index) => <div key={index}> <NavLink to={'/details/' + f.id}><div onClick={handleClick} className={s.card_movie_body} >\r\n                <div className={s.card_movie_poster}>\r\n\r\n                    <img src={`https://image.tmdb.org/t/p/w500/${f.poster_path}`} alt={f.title}></img>\r\n\r\n                </div>\r\n\r\n                <div className={s.card_movie_about}>\r\n                    <div className={s.card_movie_title}>{f.title}</div>\r\n                    <div className={s.card_movie_vote}>\r\n                        <span className={s.card_movie_vote_star}><i className=\"fas fa-star\"></i></span>{f.vote_average}</div>\r\n                    <div className={s.card_movie_overview}>{f.overview}</div>\r\n\r\n                </div>\r\n\r\n            </div> </NavLink> </div>) : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MainPage","import { applyMiddleware, combineReducers, createStore, Action } from \"redux\";\r\nimport thunkMiddleware, { ThunkAction } from \"redux-thunk\"\r\nimport filmsReducer from './filmsReducer';\r\n\r\n\r\nlet rootReducer = combineReducers({\r\n    films: filmsReducer\r\n});\r\n\r\ntype RootReducerType = typeof rootReducer\r\nexport type AppStateType = ReturnType<RootReducerType>\r\n\r\nexport type CommonActionsTypes<T> = T extends {[key: string]:(...args:any[])=> infer U }?U:never\r\n\r\nexport type CommonThunkType<A extends Action>= ThunkAction<Promise<void>, AppStateType, unknown, A>\r\n\r\n\r\n\r\n\r\nlet store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\r\n\r\nexport default store;","import { useEffect, useState } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { NavLink, useLocation } from \"react-router-dom\"\r\nimport { getFilmDetaisThunk } from './../2_bll_films/filmsReducer';\r\nimport { filmDetailsSelector } from './../2_bll_films/filmsSelector';\r\nimport s from './FilmsDetails.module.css'\r\nimport Error from './Error';\r\n\r\nconst FilmsDetails = () => {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const film = useSelector(filmDetailsSelector)\r\n\r\n    const [prevFilm, setPrevFilm] = useState(0)\r\n    const [nextFilm, setNextFilm] = useState(0)\r\n\r\n    const location = useLocation()\r\n    let adress = location.pathname\r\n    const id = Number(adress.substring(9))\r\n\r\n    const films = JSON.parse(localStorage.getItem('films') as string)\r\n\r\n    useEffect(() => {\r\n        dispatch(getFilmDetaisThunk(id))\r\n\r\n        films.forEach((film: any, index: any) => {\r\n            if (film.id === id) {\r\n                setPrevFilm(index - 1)\r\n                setNextFilm(index + 1)\r\n            }\r\n        })\r\n    }, [id])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className={s.prev_button}><NavLink to='/films'>\r\n                <i className=\"fas fa-chevron-left\"></i>\r\n            </NavLink>\r\n            </div>\r\n\r\n            <Error/>\r\n\r\n            {film && <div>\r\n\r\n                <div className={s.details_poster}>\r\n\r\n                    <div className={s.details_poster_prev}>{films[prevFilm] &&\r\n\r\n                        <NavLink to={'/details/' + films[prevFilm].id}>\r\n                            <img src={`https://image.tmdb.org/t/p/w500/${films[prevFilm].poster_path}`} alt={films[prevFilm].title}></img>\r\n                        </NavLink>}  </div>\r\n\r\n                    <span> <img src={`https://image.tmdb.org/t/p/w500/${film.poster_path}`} alt={film.title}></img> </span>\r\n\r\n                    <div className={s.details_poster_next}> {films[nextFilm] &&\r\n\r\n                        <NavLink to={'/details/' + films[nextFilm].id}>\r\n                            <img src={`https://image.tmdb.org/t/p/w500/${films[nextFilm].poster_path}`} alt={films[nextFilm].title}></img>\r\n                        </NavLink>}</div>\r\n\r\n                </div>\r\n                <div className={s.details_title}>\r\n                    {film.title}\r\n                </div>\r\n\r\n                <div className={s.details_common_info}>\r\n\r\n                    <span>{film.release_date}</span>\r\n                    <span className={s.details_common_info_dot}><i className=\"fas fa-circle\"></i></span>\r\n                    <span>{String(film.runtime).charAt(0)}h {String(film.runtime).substr(1)}m</span>\r\n                    <span className={s.details_common_info_dot}><i className=\"fas fa-circle\"></i></span>\r\n                    <span>\r\n                        <span className={s.details_common_info_star}><i className=\"fas fa-star\"></i></span>\r\n                        <span className={s.details_common_info_votu}>{film.vote_average}</span></span>\r\n                </div>\r\n\r\n                <div className={s.details_tagline}>\r\n                    <span>Tagline:</span>\r\n                    {film.tagline}\r\n                </div>\r\n\r\n                <div className={s.details_overview}>\r\n                    {film.overview}\r\n                </div>\r\n\r\n            </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FilmsDetails","import { BrowserRouter, Redirect, Route, withRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\"\nimport MainPage from './MainPage';\nimport store from \"../2_bll_films/redux\";\nimport FilmsDetails from './FilmsDetails';\nimport s from './App.module.css'\n\n\nconst App = () => {\n  return (<>\n\n    <div className={s.container}>\n      <Route exact path='/' render={() => <Redirect to={\"/films\"} />} />\n      <Route path='/films' render={() => <MainPage />} />\n      <Route path='/details/:filmId?' render={() => <FilmsDetails />} />\n    </div>\n    \n    \n   <div className={s.footer}>\n      <div><i className=\"fas fa-video\"></i></div>\n      Movie\n    </div>\n  </>\n  );\n}\n\nlet AppC = withRouter(App)\n\nconst AppContainer = () => {\n  return (\n    <AppC />\n  )\n}\n\nlet MainApp: React.FC = () => {\n  return <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <Provider store={store}>\n      <AppContainer />\n    </Provider>\n  </BrowserRouter>\n}\n\nexport default MainApp\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport MainApp from './1_ui_films/App';\n\n\nReactDOM.render(\n    <MainApp />,\n  document.getElementById('root')\n);\n\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"prev_button\":\"FilmsDetails_prev_button__3Hi7l\",\"details_poster\":\"FilmsDetails_details_poster__1yAG7\",\"details_poster_prev\":\"FilmsDetails_details_poster_prev__1oRE0\",\"details_poster_next\":\"FilmsDetails_details_poster_next__1rmgf\",\"details_title\":\"FilmsDetails_details_title__16qXG\",\"details_common_info\":\"FilmsDetails_details_common_info__1R6ub\",\"details_common_info_star\":\"FilmsDetails_details_common_info_star__2r1ci\",\"details_common_info_votu\":\"FilmsDetails_details_common_info_votu__3q-zr\",\"details_common_info_dot\":\"FilmsDetails_details_common_info_dot__1ySQU\",\"details_tagline\":\"FilmsDetails_details_tagline__3h4Pr\",\"details_overview\":\"FilmsDetails_details_overview__1G1lo\"};"],"sourceRoot":""}